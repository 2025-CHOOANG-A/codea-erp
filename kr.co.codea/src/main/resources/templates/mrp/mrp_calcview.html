<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>자재소요량 계산</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
      }

      .table th,
      .table td {
        vertical-align: middle;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div style="max-width: 900px; margin: 40px auto">
      <h4 class="fw-bold mb-4">▣ 자재소요량 계산</h4>

      <div class="mb-4">
        <h5 class="fw-bold mb-3">BOM 상세</h5>
        <div class="table-responsive">
          <table
            class="table table-bordered align-middle"
            style="background: #fafbfc"
          >
            <tbody>
              <tr>
                <th class="bg-light text-end" style="width: 180px">BOM 코드</th>
                <td>BOM2024061001</td>
                <th class="bg-light text-end" style="width: 180px">
                  제품 코드
                </th>
                <td>P1001</td>
              </tr>
              <tr>
                <th class="bg-light text-end">제품 명</th>
                <td>고강도 볼트</td>
                <th class="bg-light text-end">규격</th>
                <td>M10x50</td>
              </tr>
              <tr>
                <th class="bg-light text-end">단위(EA)</th>
                <td>EA</td>
                <th class="bg-light text-end">생산수량</th>
                <td>
                  <div class="input-group" style="max-width: 200px">
                    <input
                      type="number"
                      class="form-control"
                      id="prodQty"
                      value="100"
                    />
                    <button
                      class="btn btn-primary"
                      type="button"
                      onclick="calcMrp()"
                    >
                      계산
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <th class="bg-light text-end">자재소요량</th>
                <td id="mrpQty" colspan="3">400</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div>
        <h5 class="fw-bold mb-3">자재 목록</h5>
        <div class="table-responsive">
          <table
            class="table table-bordered align-middle"
            style="background: #fafbfc"
          >
            <thead>
              <tr>
                <th class="bg-light">자재 코드</th>
                <th class="bg-light">자재 명</th>
                <th class="bg-light">규격</th>
                <th class="bg-light">단위(EA)</th>
                <th class="bg-light">단가</th>
                <th class="bg-light">수량</th>
                <th class="bg-light">총 금액</th>
              </tr>
            </thead>
            <tbody id="matList">
              <tr>
                <td>M2001</td>
                <td>강철 원재료</td>
                <td>SS400</td>
                <td>EA</td>
                <td>200</td>
                <td>200</td>
                <td>40,000</td>
              </tr>
              <tr>
                <td>M2002</td>
                <td>너트</td>
                <td>M10</td>
                <td>EA</td>
                <td>50</td>
                <td>100</td>
                <td>5,000</td>
              </tr>
              <tr>
                <td>M2003</td>
                <td>와셔</td>
                <td>M10</td>
                <td>EA</td>
                <td>30</td>
                <td>100</td>
                <td>3,000</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <script>
      function calcMrp() {
        const qty = parseInt(document.getElementById("prodQty").value, 10) || 0;
        document.getElementById("mrpQty").innerText = qty * 4;

        const matList = [
          {
            code: "M2001",
            name: "강철 원재료",
            spec: "SS400",
            unit: "EA",
            price: 200,
            per: 2,
          },
          {
            code: "M2002",
            name: "너트",
            spec: "M10",
            unit: "EA",
            price: 50,
            per: 1,
          },
          {
            code: "M2003",
            name: "와셔",
            spec: "M10",
            unit: "EA",
            price: 30,
            per: 1,
          },
        ];

        let html = "";
        matList.forEach((mat) => {
          const cnt = qty * mat.per;
          const total = cnt * mat.price;
          html += `<tr>
                    <td>${mat.code}</td>
                    <td>${mat.name}</td>
                    <td>${mat.spec}</td>
                    <td>${mat.unit}</td>
                    <td>${mat.price}</td>
                    <td>${cnt}</td>
                    <td>${total.toLocaleString()}</td>
                  </tr>`;
        });

        document.getElementById("matList").innerHTML = html;
      }
    </script>
  </body>
</html>
