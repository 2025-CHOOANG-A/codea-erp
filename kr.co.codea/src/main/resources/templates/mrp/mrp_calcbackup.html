<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>자재소요량 계산</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        overflow-x: hidden;
      }

      .sidebar {
        position: fixed;
        top: 0;
        left: -250px;
        width: 250px;
        height: 100%;
        background-color: #343a40;
        color: white;
        overflow-y: scroll;
        overflow-y: auto;
        padding: 1rem 1rem 2rem;
        z-index: 1050;
        transition: left 0.3s ease;
      }

      .sidebar.active {
        left: 0;
      }

      .sidebar h5,
      .sidebar .section-title {
        font-size: 14px;
        color: #adb5bd;
        margin-top: 1.5rem;
        margin-bottom: 0.5rem;
      }

      .sidebar a {
        display: block;
        color: white;
        text-decoration: none;
        padding: 4px 0;
        font-size: 15px;
      }

      .sidebar a:hover {
        text-decoration: underline;
      }

      .menu-header {
        font-weight: bold;
        font-size: 18px;
        margin-bottom: 1rem;
      }

      .top-bar {
        height: 60px;
        background-color: white;
        padding: 0 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: black;
      }

      .menu-icon {
        font-size: 24px;
        cursor: pointer;
        color: black;
        background: none;
        border: none;
      }

      .close-icon {
        font-size: 20px;
        color: white;
        background: none;
        border: none;
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
      }

      .main-content {
        padding: 2rem;
        transition: margin-left 0.3s ease;
      }

      .main-content.shifted {
        margin-left: 250px;
      }

      .table th,
      .table td {
        vertical-align: middle;
        text-align: center;
      }

      .btn-group-bottom {
        margin-top: 1rem;
        text-align: right;
      }

      .input[readonly].form-control {
        background-color: #fff !important;
        color: #212529 !important;
      }
    </style>
  </head>
  <body>
    <div class="sidebar" id="sidebar">
      <button class="close-icon" onclick="toggleSidebar()">&times;</button>
      <div class="menu-header">메뉴</div>
      <div class="section-title">기준정보관리</div>
      <a href="#">사업장관리</a>
      <a href="#">거래처관리</a>
      <a href="#">창고관리</a>
      <a href="#">제품관리</a>
      <a href="#">품목관리</a>
      <a href="#">사원관리</a>
      <a href="#">공지사항</a>
      <div class="section-title">구매영업관리</div>
      <a href="#">발주관리</a>
      <a href="#">주문관리</a>
      <a href="#">출고관리</a>
      <a href="#">자재소요량계산</a>
      <div class="section-title">자재관리</div>
      <a href="#">입고관리</a>
      <a href="#">재고관리</a>
      <div class="section-title">생산관리</div>
      <a href="#">생산계획</a>
    </div>
    <div class="top-bar">
      <button class="menu-icon" onclick="toggleSidebar()">&#9776;</button>
      <h3 class="fw-bold m-0">CodeA</h3>
      <div></div>
    </div>
    <div
      class="main-content"
      id="mainContent"
      style="max-width: 900px; margin: 40px auto 0 auto"
    >
      <h4 class="fw-bold mb-4">▣ 자재소요량 계산</h4>
      <div class="mb-4">
        <h5 class="fw-bold mb-3">BOM 상세</h5>
        <div class="table-responsive">
          <table
            class="table table-bordered align-middle mb-0"
            style="background: #fafbfc"
          >
            <tbody>
              <tr>
                <th class="bg-light text-end" style="width: 180px">BOM 코드</th>
                <td>BOM2024061001</td>
                <th class="bg-light text-end" style="width: 180px">
                  제품 코드
                </th>
                <td>P1001</td>
              </tr>
              <tr>
                <th class="bg-light text-end">제품 명</th>
                <td>고강도 볼트</td>
                <th class="bg-light text-end">규격</th>
                <td>M10x50</td>
              </tr>
              <tr>
                <th class="bg-light text-end">단위(EA)</th>
                <td>EA</td>
                <th class="bg-light text-end">생산수량</th>
                <td>
                  <div class="input-group" style="max-width: 200px">
                    <input
                      type="number"
                      class="form-control"
                      id="prodQty"
                      value="100"
                    />
                    <button
                      class="btn btn-primary"
                      type="button"
                      onclick="calcMrp()"
                    >
                      계산
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <th class="bg-light text-end">자재소요량</th>
                <td id="mrpQty" colspan="3">400</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div>
        <h5 class="fw-bold mb-3">자재 목록</h5>
        <div class="table-responsive">
          <table
            class="table table-bordered align-middle"
            style="background: #fafbfc"
          >
            <thead>
              <tr>
                <th class="bg-light">자재 코드</th>
                <th class="bg-light">자재 명</th>
                <th class="bg-light">규격</th>
                <th class="bg-light">단위(EA)</th>
                <th class="bg-light">단가</th>
                <th class="bg-light">수량</th>
                <th class="bg-light">총 금액</th>
              </tr>
            </thead>
            <tbody id="matList">
              <tr>
                <td>M2001</td>
                <td>강철 원재료</td>
                <td>SS400</td>
                <td>EA</td>
                <td>200</td>
                <td>200</td>
                <td>40,000</td>
              </tr>
              <tr>
                <td>M2002</td>
                <td>너트</td>
                <td>M10</td>
                <td>EA</td>
                <td>50</td>
                <td>100</td>
                <td>5,000</td>
              </tr>
              <tr>
                <td>M2003</td>
                <td>와셔</td>
                <td>M10</td>
                <td>EA</td>
                <td>30</td>
                <td>100</td>
                <td>3,000</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const content = document.getElementById("mainContent");
        sidebar.classList.toggle("active");
        content.classList.toggle("shifted");
      }

      // 샘플 계산 함수 (실제 로직에 맞게 수정 필요)
      function calcMrp() {
        const qty = parseInt(document.getElementById("prodQty").value, 10) || 0;
        // 예시: 1개 생산시 자재소요량 4개, 강철:2, 너트:1, 와셔:1
        document.getElementById("mrpQty").innerText = qty * 4;

        // 자재별 수량 및 금액 계산
        const matList = [
          {
            code: "M2001",
            name: "강철 원재료",
            spec: "SS400",
            unit: "EA",
            price: 200,
            per: 2,
          },
          {
            code: "M2002",
            name: "너트",
            spec: "M10",
            unit: "EA",
            price: 50,
            per: 1,
          },
          {
            code: "M2003",
            name: "와셔",
            spec: "M10",
            unit: "EA",
            price: 30,
            per: 1,
          },
        ];
        let html = "";
        matList.forEach((mat) => {
          const cnt = qty * mat.per;
          const total = cnt * mat.price;
          html += `<tr>
                    <td>${mat.code}</td>
                    <td>${mat.name}</td>
                    <td>${mat.spec}</td>
                    <td>${mat.unit}</td>
                    <td>${mat.price}</td>
                    <td>${cnt}</td>
                    <td>${total.toLocaleString()}</td>
                </tr>`;
        });
        document.getElementById("matList").innerHTML = html;
      }
    </script>
  </body>
</html>
