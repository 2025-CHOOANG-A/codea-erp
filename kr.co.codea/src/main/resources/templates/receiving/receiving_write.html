<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>입고 등록</title>
</head>
<body>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    body {
        background: #f5f6fa;
    }
    .sidebar {
        width: 260px;
        background: #212529;
        color: #fff;
        position: fixed;
        top: 0;
        left: -260px;
        height: 100vh;
        z-index: 1040;
        transition: left 0.3s;
        overflow-y: auto;
    }
    .sidebar.show {
        left: 0;
    }
    .sidebar .nav-link {
        color: #adb5bd;
        font-weight: 500;
    }
    .sidebar .nav-link.active, .sidebar .nav-link:hover {
        color: #fff;
        background: #343a40;
    }
    .sidebar .sidebar-header {
        font-size: 1.2rem;
        font-weight: 700;
        padding: 1rem 1.5rem 0.5rem 1.5rem;
        color: #fff;
        border-bottom: 1px solid #343a40;
        margin-bottom: 0.5rem;
    }
    .sidebar .nav {
        margin-bottom: 1.5rem;
    }
    .sidebar-toggle-btn {
        background: #212529;
        border: none;
        color: #fff;
        padding: 0.5rem 0.7rem;
        border-radius: 0.375rem;
        margin-right: 1rem;
        font-size: 1.3rem;
        display: flex;
        align-items: center;
        transition: background 0.2s;
    }
    .sidebar-toggle-btn:hover {
        background: #343a40;
    }
    .form-section-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 0.7rem;
        margin-top: 1.5rem;
    }
    .form-control[readonly], .form-select[readonly] {
        background-color: #f1f3f5 !important;
        color: #495057;
        opacity: 1;
    }
    .input-group-text.bg-light {
        background: #f1f3f5 !important;
    }
    .modal-dialog-centered {
        min-width: 600px;
    }
    @media (max-width: 991.98px) {
        .sidebar {
            width: 220px;
            left: -220px;
        }
        .sidebar.show {
            left: 0;
        }
        .modal-dialog-centered {
            min-width: 90vw;
        }
    }
</style>

<!-- Sidebar -->
<nav id="sidebar" class="sidebar">
    <div class="sidebar-header">메뉴</div>
    <div class="nav flex-column">
        <div class="mb-2">
            <div class="text-uppercase small px-3 py-2">기준정보관리</div>
            <a class="nav-link" href="#">사업장관리</a>
            <a class="nav-link" href="#">거래처관리</a>
            <a class="nav-link" href="#">창고관리</a>
            <a class="nav-link" href="#">제품관리</a>
            <a class="nav-link" href="#">품목관리</a>
            <a class="nav-link" href="#">사원관리</a>
            <a class="nav-link" href="#">공지사항</a>
        </div>
        <div class="mb-2">
            <div class="text-uppercase small px-3 py-2">구매영업관리</div>
            <a class="nav-link" href="#">발주관리</a>
            <a class="nav-link" href="#">주문관리</a>
            <a class="nav-link" href="#">출고관리</a>
            <a class="nav-link" href="#">자재소요량계산</a>
        </div>
        <div class="mb-2">
            <div class="text-uppercase small px-3 py-2">자재관리</div>
            <a class="nav-link" href="#">입고관리</a>
            <a class="nav-link" href="#">재고관리</a>
        </div>
        <div class="mb-2">
            <div class="text-uppercase small px-3 py-2">생산관리</div>
            <a class="nav-link" href="#">생산계획</a>
        </div>
    </div>
</nav>

<!-- Header -->
<header class="d-flex align-items-center justify-content-between px-3 py-2 bg-white shadow-sm" style="position:sticky;top:0;z-index:1030;">
    <button id="sidebarToggle" class="sidebar-toggle-btn me-2" aria-label="메뉴 열기">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
            <rect width="16" height="3" y="2" rx="1"/>
            <rect width="16" height="3" y="7" rx="1"/>
            <rect width="16" height="3" y="12" rx="1"/>
        </svg>
    </button>
    <div class="mx-auto fw-bold fs-4" style="letter-spacing:2px;">CodeA</div>
    <div style="width:40px;"></div>
</header>

<!-- Main Content -->
<main class="container my-4" style="max-width:900px;">
    <div class="bg-white rounded shadow-sm p-4">
        <div class="mb-4">
            <h5 class="fw-bold mb-0">입고 정보 등록</h5>
        </div>
        <form autocomplete="off">
            <!-- 입고 정보 -->
            <div class="form-section-title">입고 정보</div>
            <div class="row g-2 align-items-center mb-3">
                <div class="col-md-6">
                    <label class="form-label mb-1">입고 코드</label>
                    <div class="input-group">
                        <input type="text" class="form-control" readonly>
                        <button class="btn btn-outline-secondary" type="button" title="새로고침">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                                <path d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 1 1 .908-.418A4 4 0 1 0 8 4V1.5a.5.5 0 0 1 1 0v3A.5.5 0 0 1 8.5 5h-3a.5.5 0 0 1 0-1H8z"/>
                            </svg>
                        </button>
                        <button class="btn btn-outline-secondary" type="button" title="중복체크">중복체크</button>
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="form-label mb-1">입고 일자</label>
                    <input type="date" class="form-control" id="inDate" min="" required>
                </div>
            </div>

            <!-- 제품 정보 -->
            <div class="form-section-title">제품 정보</div>
            <div class="row g-2 align-items-center mb-3">
                <div class="col-md-6">
                    <label class="form-label mb-1">제품 코드</label>
                    <input type="text" class="form-control" id="productCode" readonly style="background:#f1f3f5;">
                </div>
                <div class="col-md-6">
                    <label class="form-label mb-1">제품 명</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="productName" readonly style="background:#f1f3f5;">
                        <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#productModal">검색</button>
                    </div>
                </div>
            </div>
            <div class="row g-2 align-items-center mb-3">
                <div class="col-md-4">
                    <label class="form-label mb-1">규격</label>
                    <input type="text" class="form-control" id="productSpec" readonly style="background:#f1f3f5;">
                </div>
                <div class="col-md-4">
                    <label class="form-label mb-1">단위</label>
                    <input type="text" class="form-control" id="productUnit" readonly style="background:#f1f3f5;">
                </div>
                <div class="col-md-4">
                    <label class="form-label mb-1">단가</label>
                    <input type="number" class="form-control" id="productPrice" readonly style="background:#f1f3f5;">
                </div>
            </div>

            <!-- 발주 정보 -->
            <div class="form-section-title">발주 정보</div>
            <div class="row g-2 align-items-center mb-3">
                <div class="col-md-6">
                    <label class="form-label mb-1">발주 번호</label>
                    <input type="text" class="form-control" id="orderNo" readonly style="background:#f1f3f5;">
                </div>
                <div class="col-md-6">
                    <label class="form-label mb-1">발주 일자</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="orderDate" readonly style="background:#f1f3f5;">
                        <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#orderModal">검색</button>
                    </div>
                </div>
            </div>
            <div class="row g-2 align-items-center mb-3">
                <div class="col-md-6">
                    <label class="form-label mb-1">발주 수량</label>
                    <input type="number" class="form-control" id="orderQty" readonly style="background:#f1f3f5;">
                </div>
            </div>

            <!-- 입고 내역 -->
            <div class="form-section-title">입고 내역</div>
            <div class="row g-2 align-items-center mb-3">
                <div class="col-md-6">
                    <label class="form-label mb-1">입고 수량</label>
                    <input type="number" class="form-control" id="inQty" min="1" required>
                </div>
            </div>
            <div class="row g-2 align-items-center mb-3">
                <div class="col-md-6">
                    <label class="form-label mb-1">총액</label>
                    <input type="number" class="form-control" id="totalAmount" readonly style="background:#f1f3f5;">
                </div>
            </div>

            <!-- 창고 정보 -->
            <div class="form-section-title">창고 정보</div>
            <div class="row g-2 align-items-center mb-3">
                <div class="col-md-6">
                    <label class="form-label mb-1">창고 코드</label>
                    <input type="text" class="form-control" id="warehouseCode" readonly style="background:#f1f3f5;">
                </div>
                <div class="col-md-6">
                    <label class="form-label mb-1">창고명</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="warehouseName" readonly style="background:#f1f3f5;">
                        <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#warehouseModal">검색</button>
                    </div>
                </div>
            </div>

            <!-- 담당자 정보 -->
            <div class="form-section-title">담당자 정보</div>
            <div class="row g-2 align-items-center mb-3">
                <div class="col-md-6">
                    <label class="form-label mb-1">담당자명</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="managerName" readonly style="background:#f1f3f5;">
                        <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#managerModal">검색</button>
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="form-label mb-1">담당자 전화번호</label>
                    <input type="text" class="form-control" id="managerPhone" readonly style="background:#f1f3f5;">
                </div>
            </div>

            <!-- 비고 -->
            <div class="form-section-title">비고</div>
            <div class="mb-4">
                <textarea class="form-control" rows="2" placeholder="비고를 입력하세요"></textarea>
            </div>

            <!-- 버튼 -->
            <div class="d-flex justify-content-end gap-2">
                <a href="#" class="btn btn-primary">등록</a>
                <a href="#" class="btn btn-outline-secondary">취소</a>
            </div>
        </form>
    </div>
</main>

<!-- 제품 검색 Modal -->
<div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="min-width:700px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="productModalLabel">제품 검색</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3" style="max-width:400px;">
                    <input type="text" class="form-control" id="productSearchInput" placeholder="제품명을 입력하세요">
                    <button class="btn btn-outline-secondary" type="button" id="productSearchBtn">검색</button>
                </div>
                <div class="table-responsive">
                    <table class="table table-sm table-hover align-middle mb-0" id="productSearchTable">
                        <thead class="table-light">
                            <tr>
                                <th>제품 코드</th>
                                <th>제품명</th>
                                <th>규격</th>
                                <th>단위</th>
                                <th>단가</th>
                                <th style="width:70px;">선택</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 검색 결과 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 발주 검색 Modal -->
<div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="min-width:900px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="orderModalLabel">발주 검색</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3" style="max-width:400px;">
                    <input type="text" class="form-control" id="orderSearchInput" placeholder="제품명을 입력하세요">
                    <button class="btn btn-outline-secondary" type="button" id="orderSearchBtn">검색</button>
                </div>
                <div class="table-responsive">
                    <table class="table table-sm table-hover align-middle mb-0" id="orderSearchTable">
                        <thead class="table-light">
                            <tr>
                                <th>발주 번호</th>
                                <th>발주일자</th>
                                <th>제품 코드</th>
                                <th>제품명</th>
                                <th>발주 수량</th>
                                <th>총액</th>
                                <th style="width:70px;">선택</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 검색 결과 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 창고 검색 Modal -->
<div class="modal fade" id="warehouseModal" tabindex="-1" aria-labelledby="warehouseModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="min-width:700px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="warehouseModalLabel">창고 검색</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3" style="max-width:400px;">
                    <input type="text" class="form-control" id="warehouseSearchInput" placeholder="창고명을 입력하세요">
                    <button class="btn btn-outline-secondary" type="button" id="warehouseSearchBtn">검색</button>
                </div>
                <div class="table-responsive">
                    <table class="table table-sm table-hover align-middle mb-0" id="warehouseSearchTable">
                        <thead class="table-light">
                            <tr>
                                <th>창고 코드</th>
                                <th>창고명</th>
                                <th>창고 주소</th>
                                <th style="width:70px;">선택</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 검색 결과 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 담당자 검색 Modal -->
<div class="modal fade" id="managerModal" tabindex="-1" aria-labelledby="managerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="min-width:700px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="managerModalLabel">담당자 검색</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3" style="max-width:400px;">
                    <input type="text" class="form-control" id="managerSearchInput" placeholder="담당자명을 입력하세요">
                    <button class="btn btn-outline-secondary" type="button" id="managerSearchBtn">검색</button>
                </div>
                <div class="table-responsive">
                    <table class="table table-sm table-hover align-middle mb-0" id="managerSearchTable">
                        <thead class="table-light">
                            <tr>
                                <th>담당자명</th>
                                <th>담당자 코드</th>
                                <th>담당자 전화번호</th>
                                <th style="width:70px;">선택</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 검색 결과 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS & Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Sidebar toggle
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebarToggle');
    sidebarToggle.addEventListener('click', () => {
        sidebar.classList.toggle('show');
    });
    // Close sidebar on outside click (for small screens)
    document.addEventListener('click', function(e) {
        if (sidebar.classList.contains('show') && !sidebar.contains(e.target) && !sidebarToggle.contains(e.target)) {
            sidebar.classList.remove('show');
        }
    });

    // Set min date for 입고 일자
    document.getElementById('inDate').min = new Date().toISOString().split('T')[0];

    // 총액 자동 계산
    function calcTotal() {
        const qty = parseInt(document.getElementById('inQty').value) || 0;
        const price = parseInt(document.getElementById('productPrice').value) || 0;
        document.getElementById('totalAmount').value = qty * price;
    }
    document.getElementById('inQty').addEventListener('input', calcTotal);

    // 샘플 데이터
    const products = [
        {code:'P001', name:'제품A', spec:'100ml', unit:'EA', price:1000},
        {code:'P002', name:'제품B', spec:'200ml', unit:'EA', price:2000},
        {code:'P003', name:'제품C', spec:'300ml', unit:'EA', price:3000}
    ];
    const orders = [
        {no:'O001', date:'2024-06-01', pcode:'P001', pname:'제품A', qty:10, amount:10000},
        {no:'O002', date:'2024-06-02', pcode:'P002', pname:'제품B', qty:20, amount:40000}
    ];
    const warehouses = [
        {code:'W001', name:'창고A', addr:'서울시 강남구'},
        {code:'W002', name:'창고B', addr:'부산시 해운대구'}
    ];
    const managers = [
        {name:'홍길동', code:'M001', phone:'010-1111-2222'},
        {name:'김철수', code:'M002', phone:'010-3333-4444'}
    ];

    // 제품 검색
    document.getElementById('productSearchBtn').onclick = function() {
        const val = document.getElementById('productSearchInput').value.trim();
        const tbody = document.querySelector('#productSearchTable tbody');
        tbody.innerHTML = '';
        products.filter(p => p.name.includes(val)).forEach(p => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${p.code}</td>
                <td>${p.name}</td>
                <td>${p.spec}</td>
                <td>${p.unit}</td>
                <td>${p.price}</td>
                <td><button class="btn btn-sm btn-primary" type="button">선택</button></td>
            `;
            tr.querySelector('button').onclick = function() {
                document.getElementById('productCode').value = p.code;
                document.getElementById('productName').value = p.name;
                document.getElementById('productSpec').value = p.spec;
                document.getElementById('productUnit').value = p.unit;
                document.getElementById('productPrice').value = p.price;
                document.getElementById('productModal').querySelector('.btn-close').click();
                calcTotal();
            };
            tbody.appendChild(tr);
        });
    };

    // 발주 검색
    document.getElementById('orderSearchBtn').onclick = function() {
        const val = document.getElementById('orderSearchInput').value.trim();
        const tbody = document.querySelector('#orderSearchTable tbody');
        tbody.innerHTML = '';
        orders.filter(o => o.pname.includes(val)).forEach(o => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${o.no}</td>
                <td>${o.date}</td>
                <td>${o.pcode}</td>
                <td>${o.pname}</td>
                <td>${o.qty}</td>
                <td>${o.amount}</td>
                <td><button class="btn btn-sm btn-primary" type="button">선택</button></td>
            `;
            tr.querySelector('button').onclick = function() {
                document.getElementById('orderNo').value = o.no;
                document.getElementById('orderDate').value = o.date;
                document.getElementById('orderQty').value = o.qty;
                document.getElementById('orderModal').querySelector('.btn-close').click();
            };
            tbody.appendChild(tr);
        });
    };

    // 창고 검색
    document.getElementById('warehouseSearchBtn').onclick = function() {
        const val = document.getElementById('warehouseSearchInput').value.trim();
        const tbody = document.querySelector('#warehouseSearchTable tbody');
        tbody.innerHTML = '';
        warehouses.filter(w => w.name.includes(val)).forEach(w => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${w.code}</td>
                <td>${w.name}</td>
                <td>${w.addr}</td>
                <td><button class="btn btn-sm btn-primary" type="button">선택</button></td>
            `;
            tr.querySelector('button').onclick = function() {
                document.getElementById('warehouseCode').value = w.code;
                document.getElementById('warehouseName').value = w.name;
                document.getElementById('warehouseModal').querySelector('.btn-close').click();
            };
            tbody.appendChild(tr);
        });
    };

    // 담당자 검색
    document.getElementById('managerSearchBtn').onclick = function() {
        const val = document.getElementById('managerSearchInput').value.trim();
        const tbody = document.querySelector('#managerSearchTable tbody');
        tbody.innerHTML = '';
        managers.filter(m => m.name.includes(val)).forEach(m => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${m.name}</td>
                <td>${m.code}</td>
                <td>${m.phone}</td>
                <td><button class="btn btn-sm btn-primary" type="button">선택</button></td>
            `;
            tr.querySelector('button').onclick = function() {
                document.getElementById('managerName').value = m.name;
                document.getElementById('managerPhone').value = m.phone;
                document.getElementById('managerModal').querySelector('.btn-close').click();
            };
            tbody.appendChild(tr);
        });
    };

    // 검색 input 엔터키로 검색
    ['productSearchInput','orderSearchInput','warehouseSearchInput','managerSearchInput'].forEach(id=>{
        document.getElementById(id).addEventListener('keydown',function(e){
            if(e.key==='Enter'){
                e.preventDefault();
                document.getElementById(id.replace('Input','Btn')).click();
            }
        });
    });
</script>
</body>
</html>