<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>거래처 수정</title>
</head>
<body>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    body {
        background: #f8f9fa;
    }
    .sidebar {
        width: 260px;
        background: #343a40;
        color: #fff;
        position: fixed;
        top: 0;
        left: -260px;
        height: 100vh;
        z-index: 1040;
        transition: left 0.3s;
        overflow-y: auto;
    }
    .sidebar.show {
        left: 0;
    }
    .sidebar .nav-link {
        color: #adb5bd;
    }
    .sidebar .nav-link.active, .sidebar .nav-link:hover {
        color: #fff;
        background: #495057;
    }
    .sidebar .sidebar-header {
        font-size: 1.2rem;
        font-weight: 600;
        padding: 1rem 1.5rem 0.5rem 1.5rem;
        color: #fff;
    }
    .sidebar .nav {
        margin-bottom: 1rem;
    }
    .sidebar-toggler {
        background: #343a40;
        border: none;
        color: #fff;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
        margin-right: 1rem;
        display: flex;
        align-items: center;
        font-size: 1.25rem;
        transition: background 0.2s;
    }
    .sidebar-toggler:hover {
        background: #495057;
    }
    .sidebar-backdrop {
        display: none;
        position: fixed;
        z-index: 1039;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0,0,0,0.3);
    }
    .sidebar.show ~ .sidebar-backdrop {
        display: block;
    }
    .form-section-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: #343a40;
    }
    .form-control[readonly], .form-control[disabled] {
        background-color: #e9ecef !important;
        color: #6c757d;
    }
    .input-group-text {
        background: #f1f3f5;
    }
    .modal-backdrop.show {
        opacity: 0.3;
    }
</style>

<!-- Sidebar -->
<nav id="sidebar" class="sidebar">
    <div class="sidebar-header">메뉴</div>
    <ul class="nav flex-column mb-2">
        <li class="nav-item">
            <div class="sidebar-header">기준정보관리</div>
            <a class="nav-link" href="#">사업장관리</a>
            <a class="nav-link" href="#">거래처관리</a>
            <a class="nav-link" href="#">창고관리</a>
            <a class="nav-link" href="#">제품관리</a>
            <a class="nav-link" href="#">품목관리</a>
            <a class="nav-link" href="#">사원관리</a>
            <a class="nav-link" href="#">공지사항</a>
        </li>
        <li class="nav-item">
            <div class="sidebar-header">구매영업관리</div>
            <a class="nav-link" href="#">발주관리</a>
            <a class="nav-link" href="#">주문관리</a>
            <a class="nav-link" href="#">출고관리</a>
            <a class="nav-link" href="#">자재소요량계산</a>
        </li>
        <li class="nav-item">
            <div class="sidebar-header">자재관리</div>
            <a class="nav-link" href="#">입고관리</a>
            <a class="nav-link" href="#">재고관리</a>
        </li>
        <li class="nav-item">
            <div class="sidebar-header">생산관리</div>
            <a class="nav-link" href="#">생산계획</a>
        </li>
    </ul>
</nav>
<div class="sidebar-backdrop"></div>

<!-- Header -->
<header class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top" style="z-index:1050;">
    <div class="container-fluid">
        <button class="sidebar-toggler me-2" id="sidebarToggle" aria-label="메뉴 열기">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                <rect width="16" height="2" y="2" rx="1"/>
                <rect width="16" height="2" y="7" rx="1"/>
                <rect width="16" height="2" y="12" rx="1"/>
            </svg>
        </button>
        <span class="mx-auto fw-bold fs-4" style="letter-spacing:2px;">CodeA</span>
        <span></span>
    </div>
</header>

<!-- Main Content -->
<main class="container py-4" style="max-width: 800px;">
    <div class="card shadow-sm">
        <div class="card-body">
            <form autocomplete="off">
                <div class="form-section-title mb-3">거래처 정보</div>
                <div class="row g-3 align-items-center mb-2">
                    <div class="col-md-6">
                        <label class="form-label">거래처 코드</label>
                        <div class="input-group">
                            <input type="text" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">거래처명</label>
                        <input type="text" class="form-control" placeholder="거래처명을 입력하세요">
                    </div>
                </div>
                <div class="row g-3 align-items-center mb-2">
                    <div class="col-md-6">
                        <label class="form-label">업종</label>
                        <input type="text" class="form-control" placeholder="업종을 입력하세요">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">업태</label>
                        <input type="text" class="form-control" placeholder="업태를 입력하세요">
                    </div>
                </div>
                <div class="row g-3 align-items-center mb-2">
                    <div class="col-md-8">
                        <label class="form-label">사업자 등록 번호</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="bizNum" readonly>
                            <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#bizModal">검색</button>
                        </div>
                    </div>
                </div>
                <div class="row g-3 align-items-center mb-2">
                    <div class="col-md-6">
                        <label class="form-label">사업장 전화번호</label>
                        <input type="text" class="form-control" id="bizTel" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">사업장 팩스번호</label>
                        <input type="text" class="form-control" id="bizFax" readonly>
                    </div>
                </div>
                <div class="row g-3 align-items-center mb-2">
                    <div class="col-md-8">
                        <label class="form-label">매입/매출 구분</label>
                        <select class="form-select">
                            <option value="">선택</option>
                            <option value="매입">매입</option>
                            <option value="매출">매출</option>
                        </select>
                    </div>
                </div>
                <div class="row g-3 align-items-center mb-2">
                    <div class="col-md-4">
                        <label class="form-label">우편번호</label>
                        <input type="text" class="form-control" id="zipCode" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">주소</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="address" readonly>
                            <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#addrModal">검색</button>
                        </div>
                    </div>
                </div>
                <div class="row g-3 align-items-center mb-2">
                    <div class="col-md-12">
                        <label class="form-label">상세주소</label>
                        <input type="text" class="form-control" placeholder="상세주소를 입력하세요">
                    </div>
                </div>

                <hr class="my-4">

                <div class="form-section-title mb-3">담당자 정보</div>
                <div class="row g-3 align-items-center mb-2">
                    <div class="col-md-8">
                        <label class="form-label">담당자명</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="managerName" readonly>
                            <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#managerModal">검색</button>
                        </div>
                    </div>
                </div>
                <div class="row g-3 align-items-center mb-2">
                    <div class="col-md-6">
                        <label class="form-label">담당자 전화번호</label>
                        <input type="text" class="form-control" id="managerTel" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">담당자 이메일</label>
                        <input type="email" class="form-control" id="managerEmail" readonly>
                    </div>
                </div>

                <div class="d-flex justify-content-end gap-2 mt-4">
                    <a href="#" class="btn btn-primary">수정</a>
                    <a href="#" class="btn btn-outline-secondary">취소</a>
                </div>
            </form>
        </div>
    </div>
</main>

<!-- 사업자 등록 번호 검색 모달 -->
<div class="modal fade" id="bizModal" tabindex="-1" aria-labelledby="bizModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bizModalLabel">사업자 등록 번호 검색</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="bizSearchInput" placeholder="사업자 등록 번호 입력">
                    <button class="btn btn-primary" type="button" id="bizSearchBtn">검색</button>
                </div>
                <div class="table-responsive">
                    <table class="table table-bordered table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>사업자 등록 번호</th>
                                <th>사업장명</th>
                                <th>사업장 전화번호</th>
                                <th>사업장 팩스번호</th>
                                <th>선택</th>
                            </tr>
                        </thead>
                        <tbody id="bizSearchResult">
                            <!-- 검색 결과 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 주소 검색 모달 -->
<div class="modal fade" id="addrModal" tabindex="-1" aria-labelledby="addrModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addrModalLabel">주소 검색</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="addrSearchInput" placeholder="주소 입력">
                    <button class="btn btn-primary" type="button" id="addrSearchBtn">검색</button>
                </div>
                <div class="table-responsive">
                    <table class="table table-bordered table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>우편번호</th>
                                <th>주소</th>
                                <th>선택</th>
                            </tr>
                        </thead>
                        <tbody id="addrSearchResult">
                            <!-- 검색 결과 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 담당자 검색 모달 -->
<div class="modal fade" id="managerModal" tabindex="-1" aria-labelledby="managerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="managerModalLabel">담당자 검색</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="managerSearchInput" placeholder="담당자명 입력">
                    <button class="btn btn-primary" type="button" id="managerSearchBtn">검색</button>
                </div>
                <div class="table-responsive">
                    <table class="table table-bordered table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>담당자명</th>
                                <th>담당자 코드</th>
                                <th>담당자 전화번호</th>
                                <th>선택</th>
                            </tr>
                        </thead>
                        <tbody id="managerSearchResult">
                            <!-- 검색 결과 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS & Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Sidebar toggle
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebarBackdrop = document.querySelector('.sidebar-backdrop');
    function closeSidebar() {
        sidebar.classList.remove('show');
        sidebarBackdrop.style.display = 'none';
    }
    function openSidebar() {
        sidebar.classList.add('show');
        sidebarBackdrop.style.display = 'block';
    }
    sidebarToggle.addEventListener('click', () => {
        if (sidebar.classList.contains('show')) {
            closeSidebar();
        } else {
            openSidebar();
        }
    });
    sidebarBackdrop.addEventListener('click', closeSidebar);

    // Prevent sidebar toggle button from disappearing
    window.addEventListener('resize', () => {
        if (window.innerWidth > 991) closeSidebar();
    });

    // Dummy data for modals
    const bizData = [
        {num: '123-45-67890', name: '삼성전자', tel: '02-1234-5678', fax: '02-8765-4321'},
        {num: '234-56-78901', name: 'LG화학', tel: '02-2345-6789', fax: '02-9876-5432'}
    ];
    const addrData = [
        {zip: '04524', addr: '서울특별시 중구 세종대로 110'},
        {zip: '06164', addr: '서울특별시 강남구 테헤란로 231'}
    ];
    const managerData = [
        {name: '홍길동', code: 'M001', tel: '010-1234-5678', email: 'hong@company.com'},
        {name: '김철수', code: 'M002', tel: '010-2345-6789', email: 'kim@company.com'}
    ];

    // 사업자 등록 번호 검색
    document.getElementById('bizSearchBtn').onclick = function() {
        const val = document.getElementById('bizSearchInput').value.trim();
        const result = bizData.filter(d => d.num.includes(val));
        const tbody = document.getElementById('bizSearchResult');
        tbody.innerHTML = result.map(d => `
            <tr>
                <td>${d.num}</td>
                <td>${d.name}</td>
                <td>${d.tel}</td>
                <td>${d.fax}</td>
                <td><button class="btn btn-sm btn-primary" onclick="selectBiz('${d.num}','${d.tel}','${d.fax}')">선택</button></td>
            </tr>
        `).join('') || '<tr><td colspan="5" class="text-center text-secondary">검색 결과가 없습니다.</td></tr>';
    };
    window.selectBiz = function(num, tel, fax) {
        document.getElementById('bizNum').value = num;
        document.getElementById('bizTel').value = tel;
        document.getElementById('bizFax').value = fax;
        document.getElementById('bizNum').readOnly = true;
        document.getElementById('bizTel').readOnly = true;
        document.getElementById('bizFax').readOnly = true;
        bootstrap.Modal.getOrCreateInstance(document.getElementById('bizModal')).hide();
    };

    // 주소 검색
    document.getElementById('addrSearchBtn').onclick = function() {
        const val = document.getElementById('addrSearchInput').value.trim();
        const result = addrData.filter(d => d.addr.includes(val));
        const tbody = document.getElementById('addrSearchResult');
        tbody.innerHTML = result.map(d => `
            <tr>
                <td>${d.zip}</td>
                <td>${d.addr}</td>
                <td><button class="btn btn-sm btn-primary" onclick="selectAddr('${d.zip}','${d.addr}')">선택</button></td>
            </tr>
        `).join('') || '<tr><td colspan="3" class="text-center text-secondary">검색 결과가 없습니다.</td></tr>';
    };
    window.selectAddr = function(zip, addr) {
        document.getElementById('zipCode').value = zip;
        document.getElementById('address').value = addr;
        document.getElementById('zipCode').readOnly = true;
        document.getElementById('address').readOnly = true;
        bootstrap.Modal.getOrCreateInstance(document.getElementById('addrModal')).hide();
    };

    // 담당자 검색
    document.getElementById('managerSearchBtn').onclick = function() {
        const val = document.getElementById('managerSearchInput').value.trim();
        const result = managerData.filter(d => d.name.includes(val));
        const tbody = document.getElementById('managerSearchResult');
        tbody.innerHTML = result.map(d => `
            <tr>
                <td>${d.name}</td>
                <td>${d.code}</td>
                <td>${d.tel}</td>
                <td><button class="btn btn-sm btn-primary" onclick="selectManager('${d.name}','${d.tel}','${d.email}')">선택</button></td>
            </tr>
        `).join('') || '<tr><td colspan="4" class="text-center text-secondary">검색 결과가 없습니다.</td></tr>';
    };
    window.selectManager = function(name, tel, email) {
        document.getElementById('managerName').value = name;
        document.getElementById('managerTel').value = tel;
        document.getElementById('managerEmail').value = email;
        document.getElementById('managerName').readOnly = true;
        document.getElementById('managerTel').readOnly = true;
        document.getElementById('managerEmail').readOnly = true;
        bootstrap.Modal.getOrCreateInstance(document.getElementById('managerModal')).hide();
    };
</script>
</body>
</html>